---
import { Image } from "astro:assets";

interface Props {
  image: ImageMetadata;
  alt: string;
  variant?: "default" | "style2";
}

const { image, alt, variant = "default" } = Astro.props;
---

<div class="stacking-card">
  <div class={`stacking-card-inner-wrapper ${variant}`}>
    <!--Content slot -->
    <div>
      <slot />
    </div>
    <!-- Image -->
    <Image src={image} alt={alt} width={643} height={400} class="squircle-m" />
  </div>
</div>

<style>
  .stacking-card {
    margin-block-start: 2rem;
  }
  .stacking-card-inner-wrapper {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 24rem), 1fr));
    gap: clamp(1.5rem, -2rem + 8.5vw, 6rem);
    align-items: center;
    background-color: var(--clr-base-2);
    border-radius: var(--squircle-m);
    corner-shape: var(--corner-shape-squircle);
    padding: clamp(2rem, 1.286rem + 1.905vw, 3rem);
    overflow: clip;
    img {
      width: 100%;
      height: 100%;
    }
    /* Style 2 */
    &.style2 {
      padding: 0;
      gap: 0;

      & > div:first-of-type {
        padding: clamp(2rem, 1.286rem + 1.905vw, 3rem);
      }
      img {
        border-radius: 0;
      }
    }
  }
</style>
