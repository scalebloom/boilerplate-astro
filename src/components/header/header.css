header{
  padding:.75rem 1.25rem;background-color:var(--clr-base);
  position:sticky/*otherwise relative*/;top:0;z-index:99;

  .site-logo {width: 12rem; height: auto;}

  &.scrolled {
    background-color: color-mix(in srgb, var(--clr-base), transparent 15%);
    backdrop-filter: blur(16px);
    box-shadow: var(--shadow-natural);
  }

  .header-inner-container {
    max-width:104rem;margin:auto;
    display:flex;justify-content:space-between;align-items:center;gap:1rem;
  }
}

/*Header col 2*/
.header-col-2 {display: flex;}

/*Header nav-toggle button*/
#nav-toggle{
  display:flex;background:none;border:none;
  position:relative;z-index:999;
  padding: .5rem;
  border-radius: var(--squircle-m);
  corner-shape: var(--corner-shape-squircle);

  &:hover, &:has(~ #header-nav.nav-open) {background-color: var(--clr-base-2);}
  &:focus-visible {outline: 1px solid var(--clr-contrast-3);}

  /*Hamburger icon*/
  .nav-toggle-icon {
    display:flex;flex-direction:column;justify-content:space-between;
    width:1.5rem;height:1rem;position:relative;

    .nav-toggle-bar {
      display:block;height:2px;width:100%;
      background:var(--clr-contrast);
      transition:transform 0.3s ease-in-out;
    }
  }

  &:has(~ #header-nav.nav-open) .nav-toggle-bar {
    &:first-child { transform:translateY(7px) rotate(45deg); }
    &:last-child { transform:translateY(-7px) rotate(-45deg); }
  }

  @media (min-width: 921px) {display: none;}
}

/*Header nav*/
#header-nav{
  /*Structure*/
  max-height:calc(100vh - var(--header-height));
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
  display: flex; flex-direction: column; gap: 1.5rem;
  /*Position*/
  position: fixed;
  top: var(--header-height);
  left: 0; right: 0;
  /*Styling*/
  background-color: color-mix(in srgb, var(--clr-base), canvas 70%);
  border: none;
  box-shadow: var(--shadow-neomorphism);
  padding:1.5rem 2rem;
  border-radius: 0 0 var(--squircle-l) var(--squircle-l);
  corner-shape: var(--corner-shape-squircle);
  /*Animation & visibility*/
  visibility: hidden;
  pointer-events: none;
  opacity: 0;
  transform: translateY(-.5rem);
  transition:
    opacity .2s ease-out,
    transform .2s ease-out,
    visibility .2s;

  &.nav-open {
    visibility: visible;
    pointer-events: auto;
    opacity: 1;
    transform: translateY(0);
  }

  @media (min-width: 921px) {
    position: static;
    flex-direction: row; align-items: center;
    margin: 0; padding: 0;
    box-shadow: none; background: transparent;
    overflow: visible; /*Allows hover underline to show*/
    visibility: visible;
    pointer-events: auto;
    opacity: 1; transform: none; transition: none;
  }

  .nav-list {
    list-style:none;margin:0;padding:0;
    display:flex;flex-direction:column;gap:1.5rem;align-items:start;

    @media (min-width: 768px) {flex-direction: row;gap: 2rem;}

      .nav-list-item, .nav-list-item summary, .sub-nav-title {
        position:relative;line-height:normal;
      }
      .nav-list-item {
        width: 100%;
        /*Underline effect (hover-capable devices only)*/
        @media (hover: hover) {
          &::after {
            content:"";position:absolute;width:100%;
            bottom:-.25rem;height:2px;
            background-color:var(--clr-accent-1);
            transform:scaleX(0);
            transform-origin:100% 50%;
            transition:transform .25s cubic-bezier(.215,.61,.355,1);
          }
          &:hover:not(:has(details[open]))::after {
            transform:scaleX(1);transform-origin:0 50%;}
        }
      }

      .nav-link, .sub-nav-link {
        font-weight:600;text-decoration:none;display:block;color:var(--clr-contrast);
        width:fit-content;
      }
      /*Submenu (details/summary)*/
      .has-submenu summary {
        cursor: pointer;
        display: flex; gap: .375rem; align-items: center;
        width: 100%;
        &:focus-visible { outline: 1px solid var(--clr-contrast-3); outline-offset: 2px; }
        svg { width:1rem; height:1rem; margin-right:-.125rem; transition: transform .2s; }
      }
      .has-submenu details[open] summary svg { transform: rotate(180deg); }

      /*Header nav sub list (submenu)*/
      .sub-nav-list{
        list-style:none; display:flex; flex-direction:column; gap:.5rem;
        margin-block-start: .75rem; padding-inline-start: 1rem;

        @media (min-width: 768px) {
          width: max-content;
          /*Position*/
          position: absolute; top: 100%;
          left: 50%; transform: translateX(-50%);
          margin-block-start: .5rem;
          /*Styling*/
          padding: 1rem;
          background-color: var(--clr-base);
          box-shadow: var(--shadow-neomorphism);
          border-radius: var(--squircle-m);
          corner-shape: var(--corner-shape-squircle);
        }
      }
      /*Submenu animation using ::details-content*/
      .has-submenu details::details-content {
        opacity: 0;
        translate: 0 -.5rem;
        transition: opacity .2s ease-out, translate .2s ease-out, content-visibility .2s allow-discrete;
      }
      .has-submenu details[open]::details-content {
        opacity: 1;
        translate: 0;
        @starting-style { opacity: 0; translate: 0 -.5rem; }
      }
      /*Sub nav link (Contains icon and texts)*/
      .sub-nav-link{
        display:flex;gap:1.25rem;align-items:center;
        width: 100%;
        padding: .5rem; 
        border-radius: var(--squircle-s); corner-shape: var(--corner-shape-squircle);
        transition: background-color .2s ease-out;
        &:hover {
          background-color: var(--clr-base-2);
        }
        /*Icon*/
        svg {
          width:2.25rem;height:2.25rem;flex-shrink:0;
          color:var(--clr-accent-1)}
        /*Sub nav texts column*/
        .sub-nav-texts-col{display:flex;flex-direction:column;gap:.33rem;}
        /*Header sub nav descriptions*/
        .sub-nav-description{font-size:0.875rem;color:var(--clr-contrast-3);}
      }
  }
  .nav-link-cta-primary {
    background-color: var(--clr-accent-1);
    color: var(--clr-base);
    border-radius: var(--squircle-l); corner-shape: var(--corner-shape-squircle);
    font-weight: 600; text-decoration: none; text-align: center;
    padding: .5rem 1.5rem;
    transition: background-color .2s ease-out;
    &:hover {
      background-color: var(--clr-contrast-2);
    }
  }
  /*Darkmode button*/
  #theme-toggle {
    margin: auto;
    svg {
      width: 1.25rem;height: 1.25rem;color: var(--clr-contrast);
    }
  }

}