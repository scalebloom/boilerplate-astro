---
/**
 * BreadcrumbList Schema Component
 * Generates breadcrumb navigation for search results
 * https://schema.org/BreadcrumbList
 */

import { siteConfig } from "../../config/site.ts";

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

// Map of paths to page names
const pageNames: Record<string, string> = {
  "/": "Home",
  "/about": "About",
  "/contact": "Contact",
  "/brand-kit": "Brand Kit",
  "/jobs": "Jobs",
};

// Get the current page name, fallback to formatted path
const getCurrentPageName = (path: string): string => {
  // Remove trailing slash if present (except for home)
  const normalizedPath = path === "/" ? path : path.replace(/\/$/, "");
  return pageNames[normalizedPath] || normalizedPath.slice(1).replace(/-/g, " ");
};

// Build breadcrumb items
const breadcrumbItems = [];

// Always include Home as first item
breadcrumbItems.push({
  "@type": "ListItem",
  position: 1,
  name: "Home",
  item: siteConfig.url,
});

// Add current page if not home
if (currentPath !== "/") {
  const normalizedPath = currentPath.replace(/\/$/, "");
  breadcrumbItems.push({
    "@type": "ListItem",
    position: 2,
    name: getCurrentPageName(currentPath),
    item: `${siteConfig.url}${normalizedPath}`,
  });
}

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: breadcrumbItems,
};
---

<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
