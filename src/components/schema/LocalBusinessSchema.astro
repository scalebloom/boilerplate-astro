---
/**
 * LocalBusiness Schema Component
 * Provides structured data for local search visibility, Google Maps integration,
 * and "near me" searches. Critical for local SEO.
 *
 * @see https://schema.org/LocalBusiness
 */

import { siteConfig } from "../../config/site";

// Build the LocalBusiness schema
const schema = {
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "@id": `${siteConfig.url}/#business`,
  name: siteConfig.name,
  legalName: siteConfig.legalName,
  url: siteConfig.url,
  description: siteConfig.description,
  logo: `${siteConfig.url}${siteConfig.branding.logo}`,
  image: `${siteConfig.url}${siteConfig.branding.logo}`,

  // Contact Information
  telephone: siteConfig.contact.phone,
  email: siteConfig.contact.email,

  // Address (conditionally includes optional fields)
  address: {
    "@type": "PostalAddress",
    ...(siteConfig.location.streetAddress && {
      streetAddress: siteConfig.location.streetAddress,
    }),
    addressLocality: siteConfig.location.addressLocality,
    addressRegion: siteConfig.location.addressRegion,
    ...(siteConfig.location.postalCode && {
      postalCode: siteConfig.location.postalCode,
    }),
    addressCountry: siteConfig.location.addressCountry,
  },

  // Service Area
  areaServed: {
    "@type": "City",
    name: siteConfig.location.addressLocality,
    addressRegion: siteConfig.location.addressRegion,
  },

  // Opening Hours (only included if defined)
  ...(siteConfig.contact.hoursStructured && {
    openingHoursSpecification: {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: siteConfig.contact.hoursStructured.dayOfWeek,
      opens: siteConfig.contact.hoursStructured.opens,
      closes: siteConfig.contact.hoursStructured.closes,
    },
  }),

  // Price Range (only included if defined)
  ...(siteConfig.business.priceRange && {
    priceRange: siteConfig.business.priceRange,
  }),

  // Business Category
  category: siteConfig.business.category,

  // Service Type
  serviceType: siteConfig.business.serviceTypes,

  // Payment Methods (only included if defined)
  ...(siteConfig.business.paymentAccepted && {
    paymentAccepted: siteConfig.business.paymentAccepted,
  }),

  // Currencies Accepted (only included if defined)
  ...(siteConfig.business.currenciesAccepted && {
    currenciesAccepted: siteConfig.business.currenciesAccepted,
  }),

  // Social Media Profiles (filters out undefined values)
  sameAs: Object.values(siteConfig.social).filter(Boolean),
};
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
